<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CSS114 Python Solver</title>
    <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css" />
    <script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-10">
    <div class="max-w-4xl mx-auto bg-white p-8 rounded-3xl shadow-lg border border-gray-200">
        <h1 class="text-2xl font-bold text-blue-600 mb-6">ðŸ”¢ CSS114 Linear Solver</h1>
        
        <div class="flex gap-4 mb-6">
            <input type="number" id="rows" value="3" class="border p-2 rounded w-20" title="Rows">
            <input type="number" id="cols" value="3" class="border p-2 rounded w-20" title="Cols">
        </div>

        <div id="matrixContainer" class="mb-6 p-4 bg-gray-50 rounded-xl border border-dashed border-gray-300"></div>

        <button py-click="solve_system" class="w-full bg-blue-600 text-white font-bold py-4 rounded-xl hover:bg-blue-700 transition-all active:scale-95">
            Calculate with Python
        </button>

        <div id="resultArea" class="mt-10 hidden">
            <div id="solutionGrid" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
            <div id="extraInfo" class="mt-4 p-2 text-xs italic text-gray-400"></div>
        </div>
    </div>

    <py-config>
        packages = ["numpy"]
    </py-config>
    <script type="py" src="./main.py"></script>

    <script>
        const rIn = document.getElementById('rows');
        const cIn = document.getElementById('cols');
        const cont = document.getElementById('matrixContainer');

        function render() {
            const r = parseInt(rIn.value); const c = parseInt(cIn.value);
            let h = `<div class="grid gap-2" style="grid-template-columns: repeat(${c}, 1fr) auto 1fr">`;
            for(let i=0; i<r; i++){
                for(let j=0; j<c; j++) h += `<input type="number" id="a-${i}-${j}" class="p-2 border rounded text-center" placeholder="0">`;
                h += `<div class="text-gray-300 font-bold self-center">|</div>`;
                h += `<input type="number" id="b-${i}" class="p-2 border border-blue-200 rounded text-center bg-blue-50" placeholder="0">`;
            }
            cont.innerHTML = h + `</div>`;
        }
        [rIn, cIn].forEach(e => e.addEventListener('change', render));
        window.onload = render;
    </script>
</body>
</html>