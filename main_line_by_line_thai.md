# คำอธิบายโค้ด `main.py` แบบทีละบรรทัด (ภาษาไทย)

เอกสารนี้อธิบายหน้าที่ของ **ทุกบรรทัด** ในไฟล์ `main.py` ตามหมายเลขบรรทัดจริงในไฟล์ต้นฉบับ

| บรรทัด | โค้ด | หน้าที่ |
|---:|---|---|
| 1 | `from fractions import Fraction` | นำเข้าไลบรารี/โมดูลที่จำเป็นสำหรับการทำงาน |
| 2 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 3 | `import numpy as np` | นำเข้าไลบรารี/โมดูลที่จำเป็นสำหรับการทำงาน |
| 4 | `from pyscript import document` | นำเข้าไลบรารี/โมดูลที่จำเป็นสำหรับการทำงาน |
| 5 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 6 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 7 | `def parse_fraction(value):` | ประกาศฟังก์ชันใหม่เพื่อแยกความรับผิดชอบของงานส่วนนี้ |
| 8 | `    text = (value or "").strip()` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 9 | `    if not text:` | ตรวจสอบเงื่อนไขก่อนตัดสินใจทำงานในบล็อกนี้ |
| 10 | `        return Fraction(0)` | ส่งค่าผลลัพธ์กลับไปยังจุดที่เรียกใช้ฟังก์ชัน |
| 11 | `    return Fraction(text)` | ส่งค่าผลลัพธ์กลับไปยังจุดที่เรียกใช้ฟังก์ชัน |
| 12 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 13 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 14 | `def is_integer_fraction(value):` | ประกาศฟังก์ชันใหม่เพื่อแยกความรับผิดชอบของงานส่วนนี้ |
| 15 | `    return isinstance(value, Fraction) and value.denominator == 1` | ส่งค่าผลลัพธ์กลับไปยังจุดที่เรียกใช้ฟังก์ชัน |
| 16 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 17 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 18 | `def format_fraction(value):` | ประกาศฟังก์ชันใหม่เพื่อแยกความรับผิดชอบของงานส่วนนี้ |
| 19 | `    if is_integer_fraction(value):` | ตรวจสอบเงื่อนไขก่อนตัดสินใจทำงานในบล็อกนี้ |
| 20 | `        return str(value.numerator)` | ส่งค่าผลลัพธ์กลับไปยังจุดที่เรียกใช้ฟังก์ชัน |
| 21 | `    return f"{value.numerator}/{value.denominator}"` | ส่งค่าผลลัพธ์กลับไปยังจุดที่เรียกใช้ฟังก์ชัน |
| 22 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 23 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 24 | `def format_system_state(A, b):` | ประกาศฟังก์ชันใหม่เพื่อแยกความรับผิดชอบของงานส่วนนี้ |
| 25 | `    lines = []` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 26 | `    for row, constant in zip(A, b):` | เริ่มวนลูปเพื่อทำงานซ้ำตามช่วงหรือข้อมูลที่กำหนด |
| 27 | `        coeffs = ", ".join(format_fraction(value) for value in row)` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 28 | `        lines.append(f"[{coeffs}] \| {format_fraction(constant)}")` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 29 | `    return "\n".join(lines)` | ส่งค่าผลลัพธ์กลับไปยังจุดที่เรียกใช้ฟังก์ชัน |
| 30 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 31 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 32 | `def format_matrix(matrix):` | ประกาศฟังก์ชันใหม่เพื่อแยกความรับผิดชอบของงานส่วนนี้ |
| 33 | `    return "\n".join(` | ส่งค่าผลลัพธ์กลับไปยังจุดที่เรียกใช้ฟังก์ชัน |
| 34 | `        "[" + ", ".join(format_fraction(value) for value in row) + "]"` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 35 | `        for row in matrix` | เริ่มวนลูปเพื่อทำงานซ้ำตามช่วงหรือข้อมูลที่กำหนด |
| 36 | `    )` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 37 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 38 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 39 | `def format_permutation(P):` | ประกาศฟังก์ชันใหม่เพื่อแยกความรับผิดชอบของงานส่วนนี้ |
| 40 | `    return "[" + ", ".join(str(value) for value in P) + "]"` | ส่งค่าผลลัพธ์กลับไปยังจุดที่เรียกใช้ฟังก์ชัน |
| 41 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 42 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 43 | `def gauss_elimination(A, b):` | ประกาศฟังก์ชันใหม่เพื่อแยกความรับผิดชอบของงานส่วนนี้ |
| 44 | `    n = len(A)` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 45 | `    A = [row[:] for row in A]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 46 | `    b = b[:]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 47 | `    steps = ["Initial augmented matrix:\n" + format_system_state(A, b)]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 48 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 49 | `    for i in range(n):` | เริ่มวนลูปเพื่อทำงานซ้ำตามช่วงหรือข้อมูลที่กำหนด |
| 50 | `        pivot = max(range(i, n), key=lambda r: abs(A[r][i]))` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 51 | `        if A[pivot][i] == 0:` | ตรวจสอบเงื่อนไขก่อนตัดสินใจทำงานในบล็อกนี้ |
| 52 | `            raise ValueError("Matrix is singular.")` | โยนข้อผิดพลาดขึ้นไปเพื่อแจ้งว่าอินพุต/สถานะนี้ไม่ถูกต้อง |
| 53 | `        if pivot != i:` | ตรวจสอบเงื่อนไขก่อนตัดสินใจทำงานในบล็อกนี้ |
| 54 | `            A[i], A[pivot] = A[pivot], A[i]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 55 | `            b[i], b[pivot] = b[pivot], b[i]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 56 | `            steps.append(` | บันทึกคำอธิบายขั้นตอนปัจจุบันลงรายการ steps เพื่อแสดงใน UI |
| 57 | `                f"Step {len(steps)}: Swap row {i + 1} with row {pivot + 1}.\n"` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 58 | `                + format_system_state(A, b)` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 59 | `            )` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 60 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 61 | `        for r in range(i + 1, n):` | เริ่มวนลูปเพื่อทำงานซ้ำตามช่วงหรือข้อมูลที่กำหนด |
| 62 | `            factor = A[r][i] / A[i][i]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 63 | `            A[r] = [a - factor * p for a, p in zip(A[r], A[i])]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 64 | `            b[r] = b[r] - factor * b[i]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 65 | `            steps.append(` | บันทึกคำอธิบายขั้นตอนปัจจุบันลงรายการ steps เพื่อแสดงใน UI |
| 66 | `                f"Step {len(steps)}: R{r + 1} = R{r + 1} - ({format_fraction(factor)})·R{i + 1}.\n"` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 67 | `                + format_system_state(A, b)` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 68 | `            )` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 69 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 70 | `    x = [Fraction(0) for _ in range(n)]` | ใช้งาน Fraction เพื่อเก็บค่ารูปแบบเศษส่วนแบบ exact |
| 71 | `    for i in range(n - 1, -1, -1):` | เริ่มวนลูปเพื่อทำงานซ้ำตามช่วงหรือข้อมูลที่กำหนด |
| 72 | `        total = sum(A[i][j] * x[j] for j in range(i + 1, n))` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 73 | `        x[i] = (b[i] - total) / A[i][i]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 74 | `        steps.append(` | บันทึกคำอธิบายขั้นตอนปัจจุบันลงรายการ steps เพื่อแสดงใน UI |
| 75 | `            f"Step {len(steps)}: Back substitution for x{i + 1} = {format_fraction(x[i])}."` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 76 | `        )` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 77 | `    return x, steps` | ส่งค่าผลลัพธ์กลับไปยังจุดที่เรียกใช้ฟังก์ชัน |
| 78 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 79 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 80 | `def gauss_jordan(A, b):` | ประกาศฟังก์ชันใหม่เพื่อแยกความรับผิดชอบของงานส่วนนี้ |
| 81 | `    n = len(A)` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 82 | `    A = [row[:] for row in A]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 83 | `    b = b[:]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 84 | `    steps = ["Initial augmented matrix:\n" + format_system_state(A, b)]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 85 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 86 | `    for i in range(n):` | เริ่มวนลูปเพื่อทำงานซ้ำตามช่วงหรือข้อมูลที่กำหนด |
| 87 | `        pivot = max(range(i, n), key=lambda r: abs(A[r][i]))` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 88 | `        if A[pivot][i] == 0:` | ตรวจสอบเงื่อนไขก่อนตัดสินใจทำงานในบล็อกนี้ |
| 89 | `            raise ValueError("Matrix is singular.")` | โยนข้อผิดพลาดขึ้นไปเพื่อแจ้งว่าอินพุต/สถานะนี้ไม่ถูกต้อง |
| 90 | `        if pivot != i:` | ตรวจสอบเงื่อนไขก่อนตัดสินใจทำงานในบล็อกนี้ |
| 91 | `            A[i], A[pivot] = A[pivot], A[i]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 92 | `            b[i], b[pivot] = b[pivot], b[i]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 93 | `            steps.append(` | บันทึกคำอธิบายขั้นตอนปัจจุบันลงรายการ steps เพื่อแสดงใน UI |
| 94 | `                f"Step {len(steps)}: Swap row {i + 1} with row {pivot + 1}.\n"` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 95 | `                + format_system_state(A, b)` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 96 | `            )` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 97 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 98 | `        pivot_value = A[i][i]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 99 | `        A[i] = [value / pivot_value for value in A[i]]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 100 | `        b[i] = b[i] / pivot_value` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 101 | `        steps.append(` | บันทึกคำอธิบายขั้นตอนปัจจุบันลงรายการ steps เพื่อแสดงใน UI |
| 102 | `            f"Step {len(steps)}: Normalize row {i + 1} by dividing by {format_fraction(pivot_value)}.\n"` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 103 | `            + format_system_state(A, b)` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 104 | `        )` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 105 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 106 | `        for r in range(n):` | เริ่มวนลูปเพื่อทำงานซ้ำตามช่วงหรือข้อมูลที่กำหนด |
| 107 | `            if r == i:` | ตรวจสอบเงื่อนไขก่อนตัดสินใจทำงานในบล็อกนี้ |
| 108 | `                continue` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 109 | `            factor = A[r][i]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 110 | `            A[r] = [a - factor * p for a, p in zip(A[r], A[i])]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 111 | `            b[r] = b[r] - factor * b[i]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 112 | `            steps.append(` | บันทึกคำอธิบายขั้นตอนปัจจุบันลงรายการ steps เพื่อแสดงใน UI |
| 113 | `                f"Step {len(steps)}: R{r + 1} = R{r + 1} - ({format_fraction(factor)})·R{i + 1}.\n"` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 114 | `                + format_system_state(A, b)` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 115 | `            )` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 116 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 117 | `    return b, steps` | ส่งค่าผลลัพธ์กลับไปยังจุดที่เรียกใช้ฟังก์ชัน |
| 118 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 119 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 120 | `def lu_decomposition_with_steps(A):` | ประกาศฟังก์ชันใหม่เพื่อแยกความรับผิดชอบของงานส่วนนี้ |
| 121 | `    n = len(A)` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 122 | `    U = [row[:] for row in A]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 123 | `    L = [[Fraction(0) for _ in range(n)] for _ in range(n)]` | ใช้งาน Fraction เพื่อเก็บค่ารูปแบบเศษส่วนแบบ exact |
| 124 | `    P = list(range(n))` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 125 | `    steps = [` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 126 | `        "Initial matrices:\n"` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 127 | `        + "A:\n"` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 128 | `        + format_matrix(A)` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 129 | `        + "\n\nL:\n"` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 130 | `        + format_matrix(L)` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 131 | `        + "\n\nU:\n"` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 132 | `        + format_matrix(U)` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 133 | `        + "\n\nPermutation order: "` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 134 | `        + format_permutation(P)` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 135 | `    ]` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 136 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 137 | `    for k in range(n):` | เริ่มวนลูปเพื่อทำงานซ้ำตามช่วงหรือข้อมูลที่กำหนด |
| 138 | `        pivot_row = max(range(k, n), key=lambda r: abs(U[r][k]))` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 139 | `        if U[pivot_row][k] == 0:` | ตรวจสอบเงื่อนไขก่อนตัดสินใจทำงานในบล็อกนี้ |
| 140 | `            raise ValueError("Matrix is singular.")` | โยนข้อผิดพลาดขึ้นไปเพื่อแจ้งว่าอินพุต/สถานะนี้ไม่ถูกต้อง |
| 141 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 142 | `        if pivot_row != k:` | ตรวจสอบเงื่อนไขก่อนตัดสินใจทำงานในบล็อกนี้ |
| 143 | `            U[k], U[pivot_row] = U[pivot_row], U[k]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 144 | `            P[k], P[pivot_row] = P[pivot_row], P[k]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 145 | `            for j in range(k):` | เริ่มวนลูปเพื่อทำงานซ้ำตามช่วงหรือข้อมูลที่กำหนด |
| 146 | `                L[k][j], L[pivot_row][j] = L[pivot_row][j], L[k][j]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 147 | `            steps.append(` | บันทึกคำอธิบายขั้นตอนปัจจุบันลงรายการ steps เพื่อแสดงใน UI |
| 148 | `                f"Step {len(steps)}: Pivot swap row {k + 1} with row {pivot_row + 1}.\n"` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 149 | `                + "L:\n"` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 150 | `                + format_matrix(L)` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 151 | `                + "\n\nU:\n"` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 152 | `                + format_matrix(U)` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 153 | `                + "\n\nPermutation order: "` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 154 | `                + format_permutation(P)` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 155 | `            )` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 156 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 157 | `        L[k][k] = Fraction(1)` | ใช้งาน Fraction เพื่อเก็บค่ารูปแบบเศษส่วนแบบ exact |
| 158 | `        steps.append(` | บันทึกคำอธิบายขั้นตอนปัจจุบันลงรายการ steps เพื่อแสดงใน UI |
| 159 | `            f"Step {len(steps)}: Set L{k + 1}{k + 1} = 1.\n"` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 160 | `            + "L:\n"` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 161 | `            + format_matrix(L)` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 162 | `        )` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 163 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 164 | `        for i in range(k + 1, n):` | เริ่มวนลูปเพื่อทำงานซ้ำตามช่วงหรือข้อมูลที่กำหนด |
| 165 | `            factor = U[i][k] / U[k][k]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 166 | `            L[i][k] = factor` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 167 | `            for j in range(k, n):` | เริ่มวนลูปเพื่อทำงานซ้ำตามช่วงหรือข้อมูลที่กำหนด |
| 168 | `                U[i][j] -= factor * U[k][j]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 169 | `            steps.append(` | บันทึกคำอธิบายขั้นตอนปัจจุบันลงรายการ steps เพื่อแสดงใน UI |
| 170 | `                f"Step {len(steps)}: Eliminate U{i + 1}{k + 1} using factor {format_fraction(factor)}.\n"` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 171 | `                + "L:\n"` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 172 | `                + format_matrix(L)` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 173 | `                + "\n\nU:\n"` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 174 | `                + format_matrix(U)` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 175 | `            )` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 176 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 177 | `    return P, L, U, steps` | ส่งค่าผลลัพธ์กลับไปยังจุดที่เรียกใช้ฟังก์ชัน |
| 178 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 179 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 180 | `def apply_permutation(P, b):` | ประกาศฟังก์ชันใหม่เพื่อแยกความรับผิดชอบของงานส่วนนี้ |
| 181 | `    return [b[index] for index in P]` | ส่งค่าผลลัพธ์กลับไปยังจุดที่เรียกใช้ฟังก์ชัน |
| 182 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 183 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 184 | `def forward_substitution_with_steps(L, b):` | ประกาศฟังก์ชันใหม่เพื่อแยกความรับผิดชอบของงานส่วนนี้ |
| 185 | `    n = len(L)` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 186 | `    y = [Fraction(0) for _ in range(n)]` | ใช้งาน Fraction เพื่อเก็บค่ารูปแบบเศษส่วนแบบ exact |
| 187 | `    steps = ["Solve Ly = Pb using forward substitution."]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 188 | `    for i in range(n):` | เริ่มวนลูปเพื่อทำงานซ้ำตามช่วงหรือข้อมูลที่กำหนด |
| 189 | `        total = sum(L[i][j] * y[j] for j in range(i))` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 190 | `        y[i] = (b[i] - total) / L[i][i]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 191 | `        steps.append(f"Step {len(steps)}: y{i + 1} = {format_fraction(y[i])}.")` | บันทึกคำอธิบายขั้นตอนปัจจุบันลงรายการ steps เพื่อแสดงใน UI |
| 192 | `    return y, steps` | ส่งค่าผลลัพธ์กลับไปยังจุดที่เรียกใช้ฟังก์ชัน |
| 193 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 194 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 195 | `def backward_substitution_with_steps(U, y):` | ประกาศฟังก์ชันใหม่เพื่อแยกความรับผิดชอบของงานส่วนนี้ |
| 196 | `    n = len(U)` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 197 | `    x = [Fraction(0) for _ in range(n)]` | ใช้งาน Fraction เพื่อเก็บค่ารูปแบบเศษส่วนแบบ exact |
| 198 | `    steps = ["Solve Ux = y using backward substitution."]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 199 | `    for i in range(n - 1, -1, -1):` | เริ่มวนลูปเพื่อทำงานซ้ำตามช่วงหรือข้อมูลที่กำหนด |
| 200 | `        total = sum(U[i][j] * x[j] for j in range(i + 1, n))` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 201 | `        x[i] = (y[i] - total) / U[i][i]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 202 | `        steps.append(f"Step {len(steps)}: x{i + 1} = {format_fraction(x[i])}.")` | บันทึกคำอธิบายขั้นตอนปัจจุบันลงรายการ steps เพื่อแสดงใน UI |
| 203 | `    return x, steps` | ส่งค่าผลลัพธ์กลับไปยังจุดที่เรียกใช้ฟังก์ชัน |
| 204 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 205 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 206 | `def lu_solve(A, b):` | ประกาศฟังก์ชันใหม่เพื่อแยกความรับผิดชอบของงานส่วนนี้ |
| 207 | `    P, L, U, decomposition_steps = lu_decomposition_with_steps(A)` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 208 | `    b_permuted = apply_permutation(P, b)` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 209 | `    permutation_step = (` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 210 | `        f"Step {len(decomposition_steps)}: Apply permutation to b => Pb = "` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 211 | `        f"[{', '.join(format_fraction(value) for value in b_permuted)}]."` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 212 | `    )` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 213 | `    y, forward_steps = forward_substitution_with_steps(L, b_permuted)` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 214 | `    x, backward_steps = backward_substitution_with_steps(U, y)` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 215 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 216 | `    steps = decomposition_steps + [permutation_step] + forward_steps + backward_steps` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 217 | `    return x, steps` | ส่งค่าผลลัพธ์กลับไปยังจุดที่เรียกใช้ฟังก์ชัน |
| 218 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 219 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 220 | `def solve_system(event):` | ประกาศฟังก์ชันใหม่เพื่อแยกความรับผิดชอบของงานส่วนนี้ |
| 221 | `    try:` | เริ่มบล็อกดักจับข้อผิดพลาดเพื่อป้องกันโปรแกรมหยุดทำงาน |
| 222 | `        rows = int(document.querySelector("#rows").value)` | อ่านหรือเขียนค่าจากองค์ประกอบบนหน้าเว็บผ่าน DOM |
| 223 | `        cols = int(document.querySelector("#cols").value)` | อ่านหรือเขียนค่าจากองค์ประกอบบนหน้าเว็บผ่าน DOM |
| 224 | `        method = document.querySelector("#method").value` | อ่านหรือเขียนค่าจากองค์ประกอบบนหน้าเว็บผ่าน DOM |
| 225 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 226 | `        A_list = []` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 227 | `        b_list = []` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 228 | `        A_exact = []` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 229 | `        b_exact = []` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 230 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 231 | `        for i in range(rows):` | เริ่มวนลูปเพื่อทำงานซ้ำตามช่วงหรือข้อมูลที่กำหนด |
| 232 | `            row_data = []` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 233 | `            row_exact = []` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 234 | `            for j in range(cols):` | เริ่มวนลูปเพื่อทำงานซ้ำตามช่วงหรือข้อมูลที่กำหนด |
| 235 | `                value = document.querySelector(f"#a-{i}-{j}").value` | อ่านหรือเขียนค่าจากองค์ประกอบบนหน้าเว็บผ่าน DOM |
| 236 | `                row_exact.append(parse_fraction(value))` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 237 | `                row_data.append(float(value or 0))` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 238 | `            A_list.append(row_data)` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 239 | `            A_exact.append(row_exact)` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 240 | `            b_value = document.querySelector(f"#b-{i}").value` | อ่านหรือเขียนค่าจากองค์ประกอบบนหน้าเว็บผ่าน DOM |
| 241 | `            b_exact.append(parse_fraction(b_value))` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 242 | `            b_list.append(float(b_value or 0))` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 243 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 244 | `        A = np.array(A_list)` | แปลงลิสต์ให้เป็นอาร์เรย์ของ NumPy เพื่อคำนวณเมทริกซ์ |
| 245 | `        b = np.array(b_list)` | แปลงลิสต์ให้เป็นอาร์เรย์ของ NumPy เพื่อคำนวณเมทริกซ์ |
| 246 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 247 | `        if rows == cols:` | ตรวจสอบเงื่อนไขก่อนตัดสินใจทำงานในบล็อกนี้ |
| 248 | `            if method == "gauss":` | ตรวจสอบเงื่อนไขก่อนตัดสินใจทำงานในบล็อกนี้ |
| 249 | `                x_exact, steps = gauss_elimination(A_exact, b_exact)` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 250 | `                info = "Calculation: Gauss Elimination with Partial Pivoting."` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 251 | `            elif method == "jordan":` | ตรวจสอบเงื่อนไขถัดไปเมื่อเงื่อนไขก่อนหน้าไม่เป็นจริง |
| 252 | `                x_exact, steps = gauss_jordan(A_exact, b_exact)` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 253 | `                info = "Calculation: Gauss-Jordan Elimination."` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 254 | `            else:` | กำหนดกรณีทางเลือกเมื่อเงื่อนไขก่อนหน้าไม่เป็นจริง |
| 255 | `                x_exact, steps = lu_solve(A_exact, b_exact)` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 256 | `                info = "Calculation: LU Decomposition with Partial Pivoting."` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 257 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 258 | `            x = [float(value) for value in x_exact]` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 259 | `            if all(is_integer_fraction(value) for value in x_exact):` | ตรวจสอบเงื่อนไขก่อนตัดสินใจทำงานในบล็อกนี้ |
| 260 | `                exact_text = ", ".join(` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 261 | `                    f"x{i + 1} = {value.numerator}" for i, value in enumerate(x_exact)` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 262 | `                )` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 263 | `            else:` | กำหนดกรณีทางเลือกเมื่อเงื่อนไขก่อนหน้าไม่เป็นจริง |
| 264 | `                exact_text = ", ".join(` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 265 | `                    f"x{i + 1} = {value.numerator}/{value.denominator}"` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 266 | `                    for i, value in enumerate(x_exact)` | เริ่มวนลูปเพื่อทำงานซ้ำตามช่วงหรือข้อมูลที่กำหนด |
| 267 | `                )` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 268 | `            info = f"{info} Exact solution: {exact_text}."` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 269 | `            process_text = "\n\n".join(steps)` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 270 | `        else:` | กำหนดกรณีทางเลือกเมื่อเงื่อนไขก่อนหน้าไม่เป็นจริง |
| 271 | `            x = np.linalg.pinv(A) @ b` | คำนวณ pseudoinverse เพื่อหา least-squares solution สำหรับเมทริกซ์ไม่จัตุรัส |
| 272 | `            info = f"Non-Square Matrix detected ({rows}x{cols}). Applied Pseudoinverse."` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 273 | `            process_text = (` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 274 | `                "Initial matrix is non-square, so row-reduction steps are not used.\n"` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 275 | `                "The solver applied the pseudoinverse method to estimate a least-squares solution."` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 276 | `            )` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 277 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 278 | `        grid = document.querySelector("#solutionGrid")` | อ่านหรือเขียนค่าจากองค์ประกอบบนหน้าเว็บผ่าน DOM |
| 279 | `        grid.innerHTML = ""` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 280 | `        for i, val in enumerate(x):` | เริ่มวนลูปเพื่อทำงานซ้ำตามช่วงหรือข้อมูลที่กำหนด |
| 281 | `            grid.innerHTML += f"""` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 282 | `                <div class="bg-white p-5 rounded-2xl border border-gray-100 shadow-sm text-center">` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 283 | `                    <div class="text-blue-500 font-bold text-[10px] uppercase mb-1">Variable X{i+1}</div>` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 284 | `                    <div class="text-2xl font-mono font-bold">{float(val):.4f}</div>` | กำหนดค่าให้ตัวแปรสำหรับใช้ในขั้นตอนถัดไป |
| 285 | `                </div>"""` | ดำเนินการตามคำสั่งในบรรทัดนี้ตามตรรกะของฟังก์ชัน |
| 286 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 287 | `        document.querySelector("#resultArea").classList.remove("hidden")` | อ่านหรือเขียนค่าจากองค์ประกอบบนหน้าเว็บผ่าน DOM |
| 288 | `        document.querySelector("#extraInfo").innerText = info` | อ่านหรือเขียนค่าจากองค์ประกอบบนหน้าเว็บผ่าน DOM |
| 289 | `        document.querySelector("#processSteps").innerText = process_text` | อ่านหรือเขียนค่าจากองค์ประกอบบนหน้าเว็บผ่าน DOM |
| 290 | `` | เว้นบรรทัดเพื่อจัดโครงสร้างโค้ดให้อ่านง่ายขึ้น |
| 291 | `    except Exception as e:` | จัดการข้อผิดพลาดที่เกิดขึ้นในบล็อก try |
| 292 | `        document.querySelector("#extraInfo").innerText = f"Error: {str(e)}"` | อ่านหรือเขียนค่าจากองค์ประกอบบนหน้าเว็บผ่าน DOM |
| 293 | `        document.querySelector("#processSteps").innerText = ""` | อ่านหรือเขียนค่าจากองค์ประกอบบนหน้าเว็บผ่าน DOM |
